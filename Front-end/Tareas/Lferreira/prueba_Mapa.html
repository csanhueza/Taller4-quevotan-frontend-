<!DOCTYPE html>
<html>
<head>
	<title> Mapa</title>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="js/fisheye.js" type="text/javascript"></script>	
</head>
<style type="text/css">
	svg {
		border: 1px solid black;
	}
.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
        }

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}

</style>
<body>
 <section>
 </section>

<script>
d3.json("json/data.json",function(error,json){
	if(error)
	{
		return console.warn(error);
	}
	renderData(json);
});
// Funcion que crea Grafico
function renderData(data){	
	
	// Obtencion de Datos
	var coord = get_coord(data);
	var nombres = get_nombres(data);
	var padding = 30;
	console.log(nombres[0]);
	// Creacion de Grafico
	

	var w = 800; var h = 600;

	// Escalas de Ejes
    var xScale = d3.scale.linear()
    	.domain([d3.min(coord,function(d){ return d[0]}),d3.max(coord,function(d){ return d[0]})])
    	.range([0,w]);
    var yScale = d3.scale.linear()
    	.domain([d3.min(coord,function(d){ return d[1]}),d3.max(coord,function(d){ return d[1]})])
    	.range([0,h]);
    //---------------------------------
    var svg = d3.select("section")
    		.append("svg")
    		.attr("width",w)
    		.attr("height",h);
    svg.selectAll("circle")
       .data(coord)
       .enter()
       .append("circle")
       .attr("cx",function(d,i){
			return xScale(d[0]);
       })
       .attr("cy",function(d,i){
       	    return yScale(d[1]);
       })
       .attr("r",5);
    // AÃ±adir Ejes
    var xAxis = d3.svg.axis()
    	.scale(xScale)
    	.orient("bottom");

    var yAxis = d3.svg.axis()
    	.scale(yScale)
    	.orient("left")
    	.ticks(10);

    svg.append("g")
       .attr("class","axis")
       .attr("transform","translate(0,"+(h-padding)+")")
       .call(xAxis);
    svg.append("g")
       .attr("class","axis")
       .attr("transform","translate("+(padding)+",0)")
       .call(yAxis);

}
function get_coord(data){
	var coord = new Array(data.Legislatura.length);
	for(var i=0 ; i < data.Legislatura.length;i++){
		coord[i] = [parseFloat(data.Legislatura[i].x),parseFloat(data.Legislatura[i].y)];
	}
	return coord;
}
function get_nombres(data){
	var name = new Array(data.Legislatura.length);
	for (var i=0;i<name.length;i++){
		name[i] = data.Legislatura[i].Nombre;
	}
	return name;
}
</script>
</body>
</html>